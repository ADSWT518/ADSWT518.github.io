<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>C++ on YazhouTang</title><link>https://www.tangda.me/tags/c++/</link><description>Recent content in C++ on YazhouTang</description><generator>Hugo</generator><language>en-us</language><copyright>© Yazhou Tang</copyright><lastBuildDate>Wed, 11 Dec 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://www.tangda.me/tags/c++/index.xml" rel="self" type="application/rss+xml"/><item><title>程序含有多个文件时构造函数的默认值问题</title><link>https://www.tangda.me/posts/2019-12-11-cpp-multi-files-constructor/</link><pubDate>Wed, 11 Dec 2019 00:00:00 +0000</pubDate><guid>https://www.tangda.me/posts/2019-12-11-cpp-multi-files-constructor/</guid><description>&lt;blockquote>
&lt;p>本文原载于 &lt;a href="https://blog.csdn.net/qq_45377501/article/details/103499442">https://blog.csdn.net/qq_45377501/article/details/103499442&lt;/a> ，是大一初学C++时的一次debug记录。&lt;/p>
&lt;/blockquote>
&lt;p>如果想在定义对象时可以指定初值也可以不指定，可以在类中设计一个带默认值的构造函数。下面这个程序：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">//文件：main.cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;#34;example.h&amp;#34;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#859900">using&lt;/span> &lt;span style="color:#859900">namespace&lt;/span> &lt;span style="color:#268bd2">std&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900;font-weight:bold">int&lt;/span> &lt;span style="color:#268bd2">main&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">hello&lt;/span> &lt;span style="color:#268bd2">A&lt;/span>(&lt;span style="color:#2aa198;font-weight:bold">2&lt;/span>), &lt;span style="color:#268bd2">B&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">A&lt;/span>.&lt;span style="color:#268bd2">print&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">B&lt;/span>.&lt;span style="color:#268bd2">print&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900">return&lt;/span> &lt;span style="color:#2aa198;font-weight:bold">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">//文件：example.h
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">#ifndef EXAMPLE_H_INCLUDED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">#define EXAMPLE_H_INCLUDED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">class&lt;/span> &lt;span style="color:#cb4b16">hello&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">private&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900;font-weight:bold">int&lt;/span> &lt;span style="color:#268bd2">b&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900">public&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">hello&lt;/span>(&lt;span style="color:#859900;font-weight:bold">int&lt;/span> &lt;span style="color:#268bd2">c&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#859900;font-weight:bold">void&lt;/span> &lt;span style="color:#268bd2">print&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">#endif &lt;/span>&lt;span style="color:#93a1a1;font-style:italic">// EXAMPLE_H_INCLUDED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">//文件：example.cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;#34;example.h&amp;#34;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#859900">using&lt;/span> &lt;span style="color:#859900">namespace&lt;/span> &lt;span style="color:#268bd2">std&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">hello&lt;/span>::&lt;span style="color:#268bd2">hello&lt;/span>(&lt;span style="color:#859900;font-weight:bold">int&lt;/span> &lt;span style="color:#268bd2">c&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">b&lt;/span> = &lt;span style="color:#268bd2">c&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900;font-weight:bold">void&lt;/span> &lt;span style="color:#268bd2">hello&lt;/span>::&lt;span style="color:#268bd2">print&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">cout&lt;/span> &amp;lt;&amp;lt;&lt;span style="color:#268bd2">b&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在编译时会报错：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>error: no matching &lt;span style="color:#859900">function&lt;/span> &lt;span style="color:#859900">for&lt;/span> call to &lt;span style="color:#2aa198">&amp;#39;hello::hello()&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>是因为我们定义的构造函数必须要指定初值&lt;/p>
&lt;p>而如果把类的执行文件改成这样：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">//文件：example.cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;#34;example.h&amp;#34;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">#include&lt;/span> &lt;span style="color:#93a1a1;font-style:italic">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span style="color:#93a1a1;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>&lt;span style="color:#859900">using&lt;/span> &lt;span style="color:#859900">namespace&lt;/span> &lt;span style="color:#268bd2">std&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">hello&lt;/span>::&lt;span style="color:#268bd2">hello&lt;/span>(&lt;span style="color:#859900;font-weight:bold">int&lt;/span> &lt;span style="color:#268bd2">c&lt;/span>=&lt;span style="color:#2aa198;font-weight:bold">0&lt;/span>)&lt;span style="color:#93a1a1;font-style:italic">//加上了一个默认值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#93a1a1;font-style:italic">&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">b&lt;/span> = &lt;span style="color:#268bd2">c&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#859900;font-weight:bold">void&lt;/span> &lt;span style="color:#268bd2">hello&lt;/span>::&lt;span style="color:#268bd2">print&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">cout&lt;/span> &amp;lt;&amp;lt;&lt;span style="color:#268bd2">b&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>却仍然出现了同样的错误：&lt;/p></description></item></channel></rss>