<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Archlinuxä¸‹çš„Nvidiaé©±åŠ¨ï¼Œä»¥åŠMineCraft - YazhouTang</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="åœ¨archçš„åŒæ˜¾å¡ç¬”è®°æœ¬ä¸­ä½¿ç”¨Nvidiaæ˜¾å¡è¿è¡ŒMineCraftï¼">
<meta property="og:image" content>
<meta property="og:title" content="Archlinuxä¸‹çš„Nvidiaé©±åŠ¨ï¼Œä»¥åŠMineCraft">
<meta property="og:description" content="åœ¨archçš„åŒæ˜¾å¡ç¬”è®°æœ¬ä¸­ä½¿ç”¨Nvidiaæ˜¾å¡è¿è¡ŒMineCraftï¼">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.tangda.me/posts/2021-08-21-archlinux-nvidia-minecraft/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-21T00:00:00+00:00">
<meta property="article:modified_time" content="2021-08-21T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Archlinuxä¸‹çš„Nvidiaé©±åŠ¨ï¼Œä»¥åŠMineCraft">
<meta name=twitter:description content="åœ¨archçš„åŒæ˜¾å¡ç¬”è®°æœ¬ä¸­ä½¿ç”¨Nvidiaæ˜¾å¡è¿è¡ŒMineCraftï¼">
<script src=https://www.tangda.me/js/feather.min.js></script>
<link href=https://www.tangda.me/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://www.tangda.me/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://www.tangda.me/>YazhouTang</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>Archlinuxä¸‹çš„Nvidiaé©±åŠ¨ï¼Œä»¥åŠMineCraft</h1>
<div class=meta>Posted on Aug 21, 2021</div>
</div>
<section class=body>
<h2 id=èµ·å› ä¸æ­£æ–‡æ— å…³>èµ·å› ï¼ˆä¸æ­£æ–‡æ— å…³ï¼‰</h2>
<p>ä»Šå¤©ä¸Šåˆåœ¨å›¾ä¹¦é¦†å­¦ä¹ çº¢é»‘æ ‘çš„æ—¶å€™å¼€èµ·äº†å°å·®ï¼Œæƒ³çœ‹çœ‹aurä¸Šæœ€å—æ¬¢è¿çš„éƒ½æ˜¯å“ªäº›è½¯ä»¶ã€‚ç„¶åçªç„¶å‘ç°äº†ä¸€ä¸ª<a href=https://aur.archlinux.org/packages/minecraft-launcher/>minecraft-launcher</a>çš„åŒ…ï¼Œäºæ˜¯å°±ä¸‹è½½ä¸‹æ¥å‡†å¤‡è¯•ä¸€è¯•ã€‚</p>
<p>ç»“æœå‘ç°è¿™æ˜¯æ­£ç‰ˆå¯åŠ¨å™¨qwqæƒ³èµ·æ¥æˆ‘åˆä¸­æ—¶å€™æœ€å¼€å§‹è¿˜æ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹å¯åŠ¨å™¨ï¼ˆä¹Ÿå°±æ˜¯ç›—ç‰ˆï¼‰æ¥è§¦åˆ°MCçš„ï¼ˆå½“æ—¶çš„ç‰ˆæœ¬ä¼¼ä¹æ˜¯1.6.4å·¦å³ï¼Ÿï¼‰å½“æ—¶å¬è¯´MineCraftçš„å¼€å‘è€…Notchè¡¨ç¤ºï¼šâ€œJust pirate it. If you still like it when you can afford it in the future, buy it then. Also don&rsquo;t forget to feel bad.â€<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>äºæ˜¯å¿ƒæƒ³è‡ªå·±é•¿å¤§åä¸€å®šè¦ä¹°ä¸€ä»½æ­£ç‰ˆã€‚è™½ç„¶ç°åœ¨è¿˜å¹¶æ²¡æœ‰ç»æµç‹¬ç«‹ï¼Œä¸è¿‡æ‹¿ç»“ä½™çš„ç”Ÿæ´»è´¹ä¹°ä¸‹å½“å¹´çš„æ¢¦æƒ³ï¼Œä¹ŸæŒºå¥½çš„hhhäºæ˜¯å°±å…¥æ‰‹äº†ä¸€ä¸ªJavaç‰ˆ ğŸ˜†</p>
<p>ä¸è¿‡æƒ³äº†æƒ³ï¼Œåœ¨å›¾ä¹¦é¦†ç©æ¸¸æˆè¿˜æ˜¯ä¸å¤ªå¥½ã€‚äºæ˜¯æ™šä¸Šå°±æå‰å›å»äº†ï¼Œå‡†å¤‡ä½“éªŒä¸€ä¸‹æ­£ç‰ˆçš„æ„Ÿå—ï¼ˆå±…ç„¶å·²ç»åˆ°äº†1.17.1ï¼‰</p>
<p>ç»“æœæ‰“å¼€ä¹‹åå‘ç°éå¸¸å¡ï¼Œè¿™æ‰æƒ³èµ·æ¥ï¼Œæˆ‘æ²¡æœ‰å®‰è£…ç”µè„‘çš„ç‹¬æ˜¾é©±åŠ¨ ğŸ˜° åˆšè£…å¥½archçš„æ—¶å€™å°è¯•è¿‡å®‰è£…ï¼Œç»“æœç»™æˆ‘æ•´é»‘å±äº†å¥½å‡ æ¬¡ï¼Œé‚æ”¾å¼ƒ ğŸ˜‚ ä½†æ˜¯ä¸ºäº†èƒ½ç©åˆ°æ­£å¸¸çš„MCï¼Œä»Šå¤©å†³å®šå†æŠ˜è…¾ä¸€ä¸‹ï¼</p>
<h2 id=æ­£å¸¸å®‰è£…>æ­£å¸¸å®‰è£…</h2>
<p>è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯Nvidiaé—­æºé©±åŠ¨+PRIMEçš„åŒæ˜¾å¡è§£å†³æ–¹æ¡ˆï¼Œå‚è€ƒäº†ç½‘ä¸Šæ‰¾åˆ°çš„åšå®¢æ–‡ç« <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>ã€‚é¦–å…ˆå®‰è£…Intelçš„æ˜¾å¡é©±åŠ¨ï¼Œä¸è¿‡æˆ‘æ—©å°±è£…è¿‡äº†ã€‚æ³¨æ„<code>lib32-mesa</code>è¿™ä¸ªåŒ…éœ€è¦å¼€å¯<code>multilib</code>ä»“åº“ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pacman -S mesa lib32-mesa
</code></pre></div><p>ç„¶åå®‰è£…Nvidiaé—­æºé©±åŠ¨ï¼Œæ³¨æ„<code>lib32-nvidia-utils</code>è¿™ä¸ªåŒ…éœ€è¦å¼€å¯<code>multilib</code>ä»“åº“ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pacman -S nvidia lib32-nvidia-utils
</code></pre></div><p>æ¥ç€å®‰è£…<code>nvidia-prime</code></p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pacman -S nvidia-prime
</code></pre></div><p>ç„¶åé‡å¯ï¼Œå°±å¯ä»¥äº†ï¼ä¹‹åå¦‚æœéœ€è¦ç”¨åˆ°ç‹¬æ˜¾ï¼Œå°±åœ¨å‘½ä»¤å‰å¢åŠ ä¸€ä¸ª<code>prime-run</code>å°±å¯ä»¥äº†ã€‚è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æ£€æµ‹æ˜¯å¦æˆåŠŸï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> ~  prime-run glxinfo | grep <span style=color:#2aa198>&#34;OpenGL renderer&#34;</span>
OpenGL renderer string: NVIDIA GeForce MX250/PCIe/SSE2
</code></pre></div><h2 id=é—®é¢˜ä¸è§£å†³>é—®é¢˜ä¸è§£å†³</h2>
<p>äºæ˜¯æˆ‘é©¬ä¸Šè¿è¡Œ</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>prime-run minecraft-launcher
</code></pre></div><p>å·²ç»è¿«ä¸åŠå¾…æƒ³å¼€å§‹æ¸¸æˆäº†ï¼</p>
<p>ç»“æœç‚¹å‡»å¼€å§‹æ¸¸æˆåï¼ŒåŠ è½½äº†ä¸€ä¼šå°±å´©æºƒäº†ï¼Œâ€œ<strong>ä¸€ä¸ªæœªçŸ¥çš„é”™è¯¯å¯¼è‡´äº†æ¸¸æˆå´©æºƒ</strong>â€ ğŸ˜­</p>
<p>åŒæ—¶ï¼Œæˆ‘è¿˜æ³¨æ„åˆ°ï¼Œåœ¨è¿è¡Œ<code>xrandr --listproviders</code>çš„æ—¶å€™ï¼Œæœ¬æ¥ä¼šè¿”å›ä¸¤ä¸ªæ˜¾å¡çš„ç»“æœï¼Œä½†æ˜¯æ­¤æ—¶åªæœ‰é›†æˆæ˜¾å¡ï¼ç‹¬æ˜¾å¥½åƒæ²¡æœ‰è¢«<code>xrandr</code>æ£€æµ‹åˆ°ï¼äºæ˜¯æˆ‘ä»è¿™ä¸€ç‚¹å‡ºå‘ï¼Œåœ¨archçš„bbsä¸ŠæŸ¥åˆ°äº†ä¸€ä¸ªå¸–å­<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>ï¼Œè§£å†³äº†é—®é¢˜ã€‚å‡ºç°é—®é¢˜çš„åŸå› æ˜¯ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œnvidia å†…æ ¸æ¨¡å—åœ¨æ˜¾ç¤ºç®¡ç†å™¨ä¹‹åæ‰åŠ è½½ã€‚ç”±<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>å’Œ<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>å¯çŸ¥</p>
<ol>
<li>
<p>é¦–å…ˆä¿®æ”¹<code>/etc/mkinitcpio.conf</code>ï¼Œå°†<code>nvidia</code>åŠ å…¥åˆ°<code>MODULES=()</code>ä¸­ã€‚</p>
</li>
<li>
<p>ç„¶åè¿è¡Œ</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo mkinitcpio -P
</code></pre></div><p>æ¯æ¬¡æ›´æ–°äº†Nvidiaé©±åŠ¨ä¹‹åéƒ½éœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨Pacman Hooksæ¥è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚åˆ›å»ºæ–°æ–‡ä»¶<code>/etc/pacman.d/hooks/nvidia.hook</code>ï¼Œå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>[Trigger]
<span style=color:#268bd2>Operation</span>=Install
<span style=color:#268bd2>Operation</span>=Upgrade
<span style=color:#268bd2>Operation</span>=Remove
<span style=color:#268bd2>Type</span>=Package
<span style=color:#268bd2>Target</span>=nvidia
<span style=color:#268bd2>Target</span>=linux
<span style=color:#93a1a1;font-style:italic># Change the linux part above and in the Exec line if a different kernel is used</span>

[Action]
<span style=color:#268bd2>Description</span>=Update Nvidia module in initcpio
<span style=color:#268bd2>Depends</span>=mkinitcpio
<span style=color:#268bd2>When</span>=PostTransaction
NeedsTargets
<span style=color:#268bd2>Exec</span>=/bin/sh -c <span style=color:#2aa198>&#39;while read -r trg; do case $trg in linux) exit 0; esac; done; /usr/bin/mkinitcpio -P&#39;</span>
</code></pre></div></li>
<li>
<p>æ¥ç€åœ¨<code>/etc/default/grub</code>çš„<code>GRUB_CMDLINE_LINUX_DEFAULT</code>ä¸­æ·»åŠ <code>nvidia-drm.modeset=1</code>çš„å†…æ ¸å‚æ•°ï¼Œå†é‡æ–°è¿è¡Œ</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></div><p>æ¥ç”Ÿæˆ<code>grub.cfg</code>æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>é‡å¯ç”µè„‘ï¼Œç„¶åå°±å¯ä»¥äº†ï¼</p>
</li>
</ol>
<p>ç°åœ¨æ¥è¿è¡Œä¸€ä¸‹<code>xrandr --listproviders</code>ï¼Œä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆæ­£å¸¸ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> ~  xrandr --listproviders
Providers: number : <span style=color:#2aa198;font-weight:700>2</span>
Provider 0: id: 0x45 cap: 0xf, Source Output, Sink Output, Source Offload, Sink Offload crtcs: <span style=color:#2aa198;font-weight:700>3</span> outputs: <span style=color:#2aa198;font-weight:700>3</span> associated providers: <span style=color:#2aa198;font-weight:700>0</span> name:modesetting
Provider 1: id: 0x254 cap: 0x0 crtcs: <span style=color:#2aa198;font-weight:700>0</span> outputs: <span style=color:#2aa198;font-weight:700>0</span> associated providers: <span style=color:#2aa198;font-weight:700>0</span> name:NVIDIA-G0
</code></pre></div><p>æœ€å<code>prime-run minecraft-launcher</code>ï¼ŒæˆåŠŸè¿›å…¥äº†æ¸¸æˆï¼Œè€Œä¸”å®Œå…¨æ²¡æœ‰å¡é¡¿äº† ğŸ˜† è¿™æ—¶å€™é£æ‰‡å¼€å§‹è½¬äº†èµ·æ¥ã€‚å¿½ç„¶æƒ³èµ·æ¥è‡ªä»å¼€å§‹ç”¨archä¹‹åï¼Œå› ä¸ºæ²¡ç”¨è¿‡ç‹¬æ˜¾ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ¬¡å¬åˆ°å‘¼å‘¼çš„é£æ‰‡å£°éŸ³hhhh</p>
<p><img src=./20210821.png alt=MineCraft!></p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>Notch&rsquo;s Twitter <a href=https://twitter.com/notch/status/157261795139125248>https://twitter.com/notch/status/157261795139125248</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>ArchLinux ä¸‹åŒæ˜¾å¡é…ç½® <a href=https://blog.sakuya.love/archives/linuxgpu/>https://blog.sakuya.love/archives/linuxgpu/</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:3 role=doc-endnote>
<p>[SOLVED] Nvidia card fails-can&rsquo;t be detected by xrandr &ndash;listproviders <a href="https://bbs.archlinux.org/viewtopic.php?id=260976">https://bbs.archlinux.org/viewtopic.php?id=260976</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:4 role=doc-endnote>
<p>NVIDIA#DRM_kernel_mode_setting - ArchWiki <a href=https://wiki.archlinux.org/title/NVIDIA#DRM_kernel_mode_setting>https://wiki.archlinux.org/title/NVIDIA#DRM_kernel_mode_setting</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/archlinux>ArchLinux</a></li>
<li><a href=/tags/minecraft>MineCraft</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<hr><a class=soc href=https://github.com/ADSWT518/ title=Github><i data-feather=github></i></a>|<a class=soc href=https://twitter.com/AndrewTang518 title=Twitter><i data-feather=twitter></i></a>|âš¡ï¸
2021 Â© Yazhou Tang | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</footer>
<script>feather.replace()</script></div>
</body>
</html>